# å…³è”å®¹å™¨

- é«˜æ•ˆçš„æŸ¥è¯¢
- é”®å€¼å¯¹å…³è”å‚¨å­˜
- ä¸»è¦å®¹å™¨æœ‰`map`,`set`
- æ ‡å‡†åº“æä¾›8ä¸ªå…³è”å®¹å™¨
    1. `set`æˆ–åˆ™`map`
    2. å…³é”®å­—æ˜¯å¦é‡å¤
        - å…è®¸é‡å¤çš„å®¹å™¨éƒ½åŒ…å«`multi`
    3. é¡ºåºä¿å­˜æˆ–æ— åº
        - æ— åºå®¹å™¨éƒ½ä»¥`unordered`å¼€å¤´
- åˆ†åˆ«å®šä¹‰åœ¨`map`å’Œ`set`å¤´æ–‡ä»¶ä¸­,æ— åºå®¹å™¨å®šä¹‰åœ¨`unordered_map`å’Œ`unordered_set`
- é»˜è®¤æŒ‰å…³é”®å­—å‡åºæ’åº
- mapä¾‹å­ å­—æ¯æ•°é‡ç»Ÿè®¡

```c++
map<char, unsigned int>  letter_count;
string a = "abcdfggaaall";
for_each(a.begin(), a.end(), [&letter_count](char s) {
    ++letter_count[s];
});
for_each(letter_count.begin(), letter_count.end(), [](auto s) {cout << s.first <<":"<<s.second<< endl; });
system("pause");
return 0;
```

- setåˆ—å­ åªç»Ÿè®¡aå­—æ¯

```c++
map<char, unsigned int>  letter_count;
set<char> exs = { 'a' };
string a = "abcdfggaaall";
for_each(a.begin(), a.end(), [&letter_count,&exs](char s) {
    if (exs.find(s) != exs.end()) {
        ++letter_count[s];
    }
});
for_each(letter_count.begin(), letter_count.end(), [](auto s) {cout << s.first <<":"<<s.second<< endl; });
system("pause");
return 0;

```

## è‡ªå®šä¹‰ç±»å‹ä¸»é”®

- è‡ªå®šä¹‰ä¸»é”®æ²¡æœ‰`<`æ²¡æœ‰è¿ç®—ç¬¦å°±å¿…éœ€ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒçš„å‡½æ•°æŒ‡é’ˆ
- `multiset<è‡ªå®šä¹‰ç±»å‹,decltype(è‡ªå®šä¹‰å‡½æ•°)*> test(è‡ªå®šä¹‰å‡½æ•°)`
  - `decltype` æŒ‡å‡ºå‡½æ•°ç±»å‹

## pair

- æ ‡å‡†åº“ç±»å‹
- å¤´æ–‡ä»¶åœ¨`utility`ä¸­
- `map`ä¸­çš„å­˜å‚¨é”®å€¼å¯¹çš„å¯¹è±¡
- `first` æ˜¯`const`æ— æ³•ä¿®é¥°çš„

> `set`è¿­ä»£å™¨ä¹Ÿæ˜¯`const`

|                       |                æè¿°                |
|:---------------------:|:----------------------------------:|
|     pair<T1,T2> p     |               åˆå§‹åŒ–               |
| pair<T1,T2> p(v1,v2)  | åˆå§‹åŒ–ä¸€ä¸ª`first`ä¸ºv1,`second`ä¸ºv2 |
| pair<T1,T2> p={v1,v2} | åˆå§‹åŒ–ä¸€ä¸ª`first`ä¸ºv1,`second`ä¸ºv2 |
|  make_pair(v1,v2)    | åˆå§‹åŒ–ä¸€ä¸ª`first`ä¸ºv1,`second`ä¸ºv2 |

## insert

- map
- è¿”å›ä¸€ä¸ª`pair`
  - `first`
    - åŸè¿­ä»£å™¨
  - `second`
    - æ’å…¥ç»“æœ
      - å·²ç»å­˜åœ¨ä¸º`false`

```c++
map<string, int> word_count;
string word;
while (cin>>word){
    auto result = word_count.insert({ word,1 });
    cout <<"result.first->first:" <<result.first->first 
    << "\nresult.first->second:" << result.first->second
    << "\nresult.second:" << result.second << endl;
}
system("pause");
return 0;
```

- multimap
  - åªè¿”å›ä¸€ä¸ªè¿­ä»£å™¨

```c++
multimap<string, int> word_count;
string word;
int index = 0;
while (cin>>word){
    auto result = word_count.insert({ word,index++ });
    cout  <<"key:"<< result->first<< endl;
    cout  <<"value:"<< result->second<< endl;
}
system("pause");
return 0;
```

## åˆ é™¤å…ƒç´ 

|              |                             æè¿°                             |
|:------------:|:------------------------------------------------------------:|
|  c.erase(k)  |    åˆ é™¤æ¯ä¸ªå…³é”®å­—ä¸ºkçš„å…ƒç´ ,è¿”å›size_typeå€¼(åˆ é™¤å…ƒç´ æ•°é‡)     |
|  c.erase(p)  | åœ¨cä¸­åˆ é™¤è¿­ä»£å™¨p,è¿”å›pä¹‹åçš„è¿­ä»£å™¨,è‹¥pæ˜¯å°¾åè¿­ä»£å™¨åˆ™è¿”å›å°¾å |
| c.erase(p,e) |             åˆ é™¤è¿­ä»£å™¨på’Œeè¡¨ç¤ºèŒƒå›´ä¸­çš„å…ƒç´ è¿”å› e             |

## è®¿é—®

- ä¸‹æ ‡æ“ä½œ
  - `multi`ç±»å‹çš„å®¹å™¨ ä¸èƒ½è¿›è¡Œä¸‹æ ‡æ“ä½œ
  - åªå¯ä»¥å¯¹é`const`çš„å®¹å™¨è¿›è¡Œæ“ä½œ
  - ä¼šå¯¹æ²¡æœ‰çš„keyæ’å…¥ä¸€ä¸ªæ–°çš„å€¼
- `find`,`count`
  - é‡å¤å…³é”®å­—å®¹å™¨ä½¿ç”¨`count`ä¼šåšæ›´å¤šçš„å·¥ä½œ
    - å”¯ä¸€å…³é”®å­—ä¸å—å½±å“
- `at`
  - åªä½¿ç”¨ç”¨äºé`const`çš„`map`å’Œ`unordered_map`

- é¢å‘è¿­ä»£å™¨
  - `lower_bound`
    - è¿”å›ç¬¬ä¸€ä¸ªè¿­ä»£å™¨
  - `upper_bound`
    - è¿”å›å°¾åè¿­ä»£å™¨(é`multimap`ä¼šè¿”å›ä¸€ä¸ªä¸å½±å“æ’åºçš„æ’å…¥ä½ç½®)
  - `equal_range`
    - æ­¤å‡½æ•°è¿”å›ä¸€ä¸ª`pair`
    - æœ¬è´¨ä¸Šç­‰ä»·ğŸ‘†

- ç»ƒä¹ 

```c++
/*************************************************
    å°†è§„åˆ™æ–‡æœ¬è½¬æ¢ä¸ºmap,åœ¨å°†å¯†æ–‡æ ¹æ®è§„åˆ™æ–‡æœ¬è½¬æ¢ä¸ºæ˜æ–‡
**************************************************/
#include <map>
#include <fstream>
#include <sstream>
#include<iostream> 
using namespace std;

/**
å°†fileè½¬æ¢ä¸ºmap
*/
map<string, string> buidMap(ifstream &file) {
    map<string, string> mapFile;
    string key;
    string value; 
    while (file >> key && getline(file, value)) {
        mapFile[key] = value.substr(1);
    }
    return mapFile;
}

/**
  æ ¹æ®è½¬æ¢è§„åˆ™è½¬æ¢æ–‡æœ¬
*/
string wordswitch(const map<string, string> &mapfile, ifstream &file) {
    string rowText;
    string result;
    while (getline(file, rowText)) {
        istringstream stream(rowText);
        string word;
        string row;
        while (stream >> word) {
            auto now = mapfile.find(word);
            if (now != mapfile.cend()) {
                word= now->second;
            }
            row +=word+" ";
        }
        result += row + "\n";
    }
    return result;
}

int main() {
    ifstream fstrm("wordRule.txt");
    ifstream word("word.txt");
    auto wordRule = buidMap(fstrm);
    auto result = wordswitch(wordRule, word);
    cout << result << endl;
    system("pause");
    return 0;
}
```

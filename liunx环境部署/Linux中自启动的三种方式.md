# Linux中自启动的三种方式

## 运行级别

- 0:系统停机状态,系统默认运行级别不能设为0,否则不能正常启动
- 1:单用户工作状态,root权限,用于系统维护,禁止远程登陆
- 2:多用户状态(没有NFS)----解释下NFS（网络文件系统的缩写由Sun公司开发能够通过网络,使不同的机器,不同的 操作系统 (主要是 Unix-like)进行彼此资料的共享使用RPC协议进行资料传输管理）
- 3:完全的多用户状态(有NFS),登陆后进入控制台命令行模式
- 4:系统未使用,保留
- 5:X11控制台,登陆后进入图形GUI模式
- 6:系统正常关闭并重启,默认运行级别不能设为6,否则不能正常启动
- `/etc/rc.d`目录下的`rcN.d`对应这七个运行等级
    > `K`开头的脚本文件代表运行级别加载时需要关闭的,`S`开头的代表需要执行

## 建立启动软连接

1 将脚本放入`/etc/init.d`目录中
2 在`/etc/rc.d/rcN.d`中建立软连接 即可
    - 多个运行级别下设置自启动,需要建立多个软连接

## `chkconfig

- `chkconfig` 默认运行级别为2345
  - `chkconfig serviceName on`
    - 开启自启动
      > 前提是已经具备脚本

## ntsysv 伪图形

- 不推荐(与chkconfig相同)

## 扩展编写自启动脚本

1. 标准头

    ```shell
      #!/bin/sh
      #chkconfig: 2345 80 90
      #description:hello.sh
    ```

   - 2345 为运行等级
   - 80 为启动此服务的优先级
   - 90 为关闭此服务的优先级

2. `chmod +x ./xxx.sh`
   - 赋予可执行权限

3. `chkconfig --add xxx.sh`
   - 添加自启动

   > 该脚本必须要在`/etc/init.d`

4. `chkconfig xxx.sh on`
   - 默认开启自启动

> 注意环境变量的加载问题

## 参考

[chkconfig](http://man.linuxde.net/chkconfig)